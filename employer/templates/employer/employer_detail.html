{% extends "employer/base.html" %}

{% block title %}{{ employer.last_name }} {{ employer.first_name }}{% endblock %}

{% block content %}
<div class="container py-4">

  <!-- Карточка профиля -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h2 class="card-title mb-4 text-center text-md-start">
        {{ employer.last_name }} {{ employer.first_name }} {{ employer.middle_name|default_if_none:" " }}
      </h2>

      <div class="table-responsive">
        <table class="table table-bordered mb-0 align-middle">
          <tbody>
            <tr>
              <th scope="row" class="w-50 w-md-25">Дата рождения:</th>
              <td>{{ employer.birth_date|default_if_none:"---" }}</td>
            </tr>
            <tr>
              <th scope="row">Должность:</th>
              <td>{{ employer.position|default_if_none:"---" }}</td>
            </tr>
            <tr>
              <th scope="row">Факультет:</th>
              <td>{{ employer.faculty|default_if_none:"---" }}</td>
            </tr>
            <tr>
              <th scope="row">Отдел:</th>
              <td>{{ employer.department|default_if_none:"---" }}</td>
            </tr>
            <tr>
              <th scope="row">Дата приёма:</th>
              <td>{{ employer.hire_date|default_if_none:"---" }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Блок наград -->
  <div class="card shadow-sm">
    <div class="card-header d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center">
      <h4 class="mb-2 mb-sm-0">Награды</h4>
      <span class="badge bg-primary">Всего наград: {{ employer.awards.count }}</span>
    </div>

    <div class="card-body p-0">
      {% if employer.awards.all %}
      <div class="table-responsive">
        <table class="table table-striped mb-0 align-middle">
          <thead class="table-dark">
            <tr>
              <th>№</th>
              <th>Наименование награды</th>
              <th>Дата награждения</th>
              <th>Выдано (орган)</th>
              <th>Тип награды</th>
              <th>Приказ №</th>
              <th>Описание</th>
            </tr>
          </thead>
          <tbody>
            {% for award in employer.awards.all %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ award }}</td>
              <td>{{ award.award_date }}</td>
              <td>{{ award.issued_by }}</td>
              <td>{{ award.get_type_display }}</td>
              <td>{{ award.document_number|default_if_none:"отсутствует" }}</td>
              <td>{{ award.description }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <div class="p-3 text-muted text-center">Наград пока нет.</div>
      {% endif %}
    </div>
  </div>

  <!-- Кнопка назад -->
  <div class="text-center mt-4">
    <a href="{% url 'employer:employer_list' %}" class="btn btn-secondary px-4">
      Назад к списку
    </a>
  </div>

</div>
{% endblock %}
